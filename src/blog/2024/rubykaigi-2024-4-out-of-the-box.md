---
published: 2024-06-19T00:00:00.000+09:00
lastUpdated: null
author: Masafumi Koba
tags: ruby, rubykaigi
---

# RubyKaigi 2024 (4) - Out-of-the-box

[前回（3）](rubykaigi-2024-3-lrama-and-prism.md)の続き。今回は3日目の「[The state of Ruby dev tooling](https://rubykaigi.org/2024/presentations/vinistock.html)」について。

[The state of Ruby tooling - Speaker Deck](https://speakerdeck.com/player/d6fda8d405aa4bfeab632d1fc973ed9e)

発表者はShopifyで[Ruby LSP](https://shopify.github.io/ruby-lsp/)を開発している方。テーマは2つあり、最初はRubyの開発者体験（Developer eXperience; DX）の問題点について。次にRuby LSPのアドオンについて発表された。個人的には最初のテーマに強い印象を受けた（もちろんRuby LSPアドオンも興味深かったが）。

何となく長い間心の中でモヤッとしていたものをこのトークがうまく言語化してくれたので、ある意味今回一番の衝撃だったかもしれない。一言でいうと、それは本稿のサブタイトルにもあるとおり **Out-of-the-box** である。

これはソフトウェア文脈でよく使われる用語で、[Wikipedia](https://en.wikipedia.org/wiki/Out_of_the_box_(feature))によればOut-of-the-boxの特徴は

> available for all users by default and do not require customization
>
> すべてのユーザーがデフォルトで利用でき、カスタマイズを必要としない

とある。つまり「箱から取り出して（*out of the box*）」すぐに使える特性のことだ。最近のコンピューターは、届いて箱から出して、セットアップ画面で数回のクリックをするとすぐに使えるようになっていると思うので、その体験を想像してみるといい。

これはハードウェアのみならずソフトウェアにも言えることで、1クリックまたは1コマンドでインストールして、設定不要ですぐに使えると非常に体験がいい。反対に、インストールが煩雑だったり設定が複雑ですぐに使えないと、イライラしてまともに使う前にアンイストールしてしまうかもしれない。

このトークでは、RustとRubyを比較して、RustのDXがいかに優れているかを解説している。rustupでRustをインストールし、組み込みのフレームワークでテストを書き、rustfmtでコードを整形し、clippyでlintチェックする、というわけだ。

Rubyの場合はどうしても歴史があるためにツールが数多く存在し、その分だけ選択肢が増える。例えば、私はrbenvを使ってRubyのインストールを管理しているが、他の人やプロジェクトではrvmを使うかもしれない。他にも、私は仕事ではRSpecを使っているが、趣味プロジェクトではtest-unitかminitestを使う。理由は両者が標準ライブラリだからだが、標準ライブラリですらテストフレームワークを2つ提供している。不慣れな人はどちらを使えばいいか混乱するだろう。

歴史的理由だから仕方ないと言ってしまえばそれまでなのだが、私はRubyには絶対に廃れて欲しくないので、新しくRubyに触れる人たちが簡単に始められるように体験を整備することは、非常に大事なことだと思っている。

RustやGoなどの歴史が比較的浅く、かつ人気のある言語は、DXを非常に重視していると思う。例えば、それらの言語や標準のLSPを提供したりしている（rust-analyzerやgoplsなど）。プログラミング言語の競争環境において、初学者への訴求を重要視しているんだと感じる。

RubyもまたDXを非常に重視している言語だと思っている。豊富な標準ライブリラリ、簡潔な構文、Railsにあるような「設定より規約（Convention over Configuration; CoC）」の文化など。ただ、ツールの選択肢が多すぎることが原因で、初学者がRubyの良さを知る前に離脱しまう可能性があるのは残念すぎる。
おそらく最近のプログラマのほとんどはVSCodeでシュッと開発を始めるだろうから、その最初の体験の比重は近年より高まってきている。

つまり、現代のプログラミング言語においては「Out-of-the-box」性といったものが非常に重要になってきていると思うのである。

また、トークではツールに複数の選択肢が存在することによる「**断片化（fragmentation）**」の懸念を述べていた。つまり、エコシステム内の開発者のリソースが分散してしまうのである。
例えば、先ほど出てきたtest-unitとminitestを材料に単純に考えると、仮に両者が1つにマージされて開発されていたときと比べて、リソースが2つに分かれてしまう。その分、バグ修正や新機能に費やす時間が減ることを意味する。
こういったことがエコシステム内で積み重なると、各開発者の努力の割に大きな成果が得られなくなるのではないかと危惧してしまう。他の言語に人や魅力が流れてしまうんじゃないかという懸念があるのだ。

ただし、多様性もまたRubyを魅力的なものにしている文化の1つだと思っている。それを損なうほど中央集権的な志向はRubyにはふさわしくないだろう（例えば、「標準」ツールしか許さん、的な）。
この多様性という良さを活かしつつ、DX（特に初学者向けの）を向上させるために大きな戦略を描くのがいいんじゃないかなぁと個人的には考えている。

DXに影響するツールをカテゴライズしてみると、次のものが浮かび上がってくる。

- LSP
- インストーラー
- テストフレームワーク
- ドキュメンテーションツール
- フォーマッター
- リンター
- タイプチェッカー

いまや時代はLSPファーストだろう。VSCode拡張をインストールすると、これらの各ツールがすぐに自動で使えるようになっているのが、多くの人にとって理想的なはずだ。これは充分に練られたデフォルト設定を提供することを含む。かつ、それらは必要十分にカスタマイズ可能であるべきだろう。

まさに「Out-of-the-box」。たった数回のクリックでRubyを書き始められる。このトークからは、そんな未来を夢想するきっかけをもらった。
