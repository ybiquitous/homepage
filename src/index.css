@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :any-link {
    @apply text-blue-700 dark:text-blue-400;
  }

  details > summary {
    @apply cursor-pointer;
  }

  details[open] > summary {
    @apply mb-2;
  }
}

@layer utilities {
  .my-text-secondary {
    @apply text-slate-500 dark:text-slate-400;
  }

  .markdown {
    & .hljs {
      @apply !text-current !p-0;
    }

    & > h1,
    & > h2,
    & > h3,
    & > h4,
    & > h5,
    & > h6 {
      @apply font-sans font-semibold;
    }

    & > h1 {
      @apply text-5xl mt-4 mb-12;
    }

    & > h2 {
      @apply text-3xl border-b border-gray-300 mt-16 mb-4 pb-2;
    }

    & > h3 {
      @apply text-2xl mt-12 mb-4;
    }

    & > h4 {
      @apply text-xl mt-8 mb-4;
    }

    & > h5 {
      @apply text-lg mt-8 mb-4;
    }

    & > h6 {
      @apply text-base mt-8 mb-4;
    }

    & hr {
      @apply my-4;
    }

    & p {
      @apply leading-loose;
    }

    & > p,
    & > pre,
    & > blockquote,
    & > ul,
    & > ol {
      @apply my-8;
    }

    & ul,
    & ol {
      @apply pl-8 leading-loose;
    }

    & ul {
      @apply list-disc;
    }

    & ol {
      @apply list-decimal;
    }

    & > blockquote {
      @apply text-gray-500 border-l-4 border-gray-400 px-4 dark:text-gray-400;

      & > p {
        @apply mt-4;
      }
    }

    & code {
      @apply text-sm bg-gray-100 rounded px-1 py-0.5 dark:bg-gray-800;
    }

    & pre {
      @apply bg-gray-100 rounded p-4 overflow-auto dark:bg-gray-800;
    }

    & :any-link {
      @apply break-all;
    }

    & details {
      @apply my-4;
    }

    /* https://github.com/rehypejs/rehype-autolink-headings */
    .icon-link {
      @apply before:content-["#"] ml-4 text-gray-300 dark:text-gray-600 hover:text-blue-700 hover:dark:text-blue-400;
    }

    & > h1 a[aria-hidden] {
      display: none;
    }

    /* https://github.com/remarkjs/remark-gfm */
    & > .footnotes {
      @apply border-t pt-4;
    }

    /* https://github.com/JS-DevTools/rehype-toc */
    & > .toc-wrapper {
      @apply bg-neutral-100 text-neutral-600 dark:bg-neutral-800 dark:text-neutral-100 text-sm rounded p-4 my-8;

      .toc-summary {
        @apply italic;
      }

      .toc-level {
        @apply list-none pl-2 pt-2;
      }

      .toc-link {
        @apply text-current inline-block truncate w-full underline underline-offset-4 decoration-dashed;
      }
    }
  }
}
