@import url("~@fortawesome/fontawesome-free/css/fontawesome.min.css");
@import url("~@fortawesome/fontawesome-free/css/solid.min.css");

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :any-link {
    @apply text-blue-700 dark:text-blue-400;
  }

  details > summary {
    @apply cursor-pointer;
  }

  details[open] > summary {
    @apply mb-2;
  }

  kbd {
    @apply mx-1 rounded-lg border border-gray-200 px-1.5 py-1 text-xs;
  }

  address {
    @apply not-italic;
  }

  /* See https://fontawesome.com/v6/docs/web/add-icons/pseudo-elements */
  a[href^="http"]:not(.no-icon)::after {
    display: inline-block;
    text-rendering: auto;
    -webkit-font-smoothing: antialiased;
    font: var(--fa-font-solid);
    font-size: 0.75em;
    content: "\f08e";
    margin: 0 0.25em 0 0.5em;
    vertical-align: 0.125em;
  }
}

@layer utilities {
  .my-text-secondary {
    @apply text-slate-500 dark:text-slate-400;
  }

  .markdown {
    & .hljs {
      @apply !p-0 !text-current;
    }

    & > h1,
    & > h2,
    & > h3,
    & > h4,
    & > h5,
    & > h6 {
      @apply font-semibold;
    }

    & > h1 {
      @apply mb-12 mt-4 text-5xl;
    }

    & > h2 {
      @apply mb-4 mt-16 border-b border-gray-300 pb-2 text-3xl;
    }

    & > h3 {
      @apply mb-4 mt-12 text-2xl;
    }

    & > h4 {
      @apply mb-4 mt-8 text-xl;
    }

    & > h5 {
      @apply mb-4 mt-8 text-lg;
    }

    & > h6 {
      @apply mb-4 mt-8 text-base;
    }

    & hr {
      @apply my-4;
    }

    & p,
    & blockquote {
      @apply my-8 leading-7;
    }

    & > pre,
    & > ul,
    & > ol {
      @apply my-6;
    }

    & ul,
    & ol {
      @apply space-y-1.5 pl-6 leading-relaxed;
    }

    & ul {
      @apply list-disc;
    }

    & ol {
      @apply list-decimal;
    }

    & > blockquote {
      @apply border-l-4 border-gray-400 px-4 text-gray-500 dark:text-gray-400;

      & > p {
        @apply mt-4;
      }
    }

    & code {
      @apply rounded bg-gray-100 px-1 py-0.5 text-sm dark:bg-gray-800;
    }

    & pre {
      @apply overflow-auto rounded bg-gray-100 p-4 dark:bg-gray-800;
    }

    & :any-link {
      @apply break-all;
    }

    & details {
      @apply my-4;
    }

    /* https://github.com/rehypejs/rehype-autolink-headings */
    .icon-link {
      @apply ml-4 text-gray-300 before:content-["#"] hover:text-blue-700 dark:text-gray-600 hover:dark:text-blue-400;
    }

    & > h1 a[aria-hidden] {
      display: none;
    }

    /* https://github.com/remarkjs/remark-gfm */
    & > .footnotes {
      @apply border-t pt-4 text-sm;

      & p {
        margin: 0;
      }
    }

    /* https://github.com/JS-DevTools/rehype-toc */
    & > .toc-wrapper {
      @apply rounded bg-neutral-100 p-4 text-sm text-neutral-600 dark:bg-neutral-800 dark:text-neutral-100;

      .toc-summary {
        @apply italic;
      }

      .toc-level {
        @apply list-none pl-2 pt-2;
      }

      .toc-item::marker {
        content: "Â»";
      }

      .toc-link {
        @apply ml-2 text-current hover:underline;
      }
    }

    /* https://github.com/jaywcjlove/remark-github-blockquote-alert */
    .markdown-alert {
      @apply my-8 grid gap-2 rounded-md border-s-4 border-blue-500 bg-gray-200 p-4 text-sm dark:bg-gray-800;

      & > .markdown-alert-title {
        @apply flex items-center gap-2 font-semibold capitalize;

        & > .octicon {
          fill: currentcolor;
        }
      }

      &.markdown-alert-note {
        @apply border-blue-500;

        & > .markdown-alert-title {
          @apply text-blue-500;
        }
      }

      & > p {
        @apply m-0;
      }
    }
  }
}

:root {
  --ybiq-bg-opacity: 0.5;

  scrollbar-gutter: stable;
}

.dark {
  --ybiq-bg-opacity: 0.1;
}

body {
  background: no-repeat
    linear-gradient(
      to bottom,
      hsl(211deg 100% 37% / var(--ybiq-bg-opacity)) 50%,
      hsl(50deg 100% 50% / var(--ybiq-bg-opacity)) 50%
    );
  background-size: auto 100vh;
  background-attachment: fixed;
}

.speakerdeck-iframe {
  max-width: 100%;
}
