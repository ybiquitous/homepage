@import "~@fortawesome/fontawesome-free/css/fontawesome.min.css";
@import "~@fortawesome/fontawesome-free/css/solid.min.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :any-link {
    @apply text-blue-700 dark:text-blue-400;
  }

  details > summary {
    @apply cursor-pointer;
  }

  details[open] > summary {
    @apply mb-2;
  }

  /* See https://fontawesome.com/v6/docs/web/add-icons/pseudo-elements */
  a[href^="http"]:not(.no-icon)::after {
    display: inline-block;
    text-rendering: auto;
    -webkit-font-smoothing: antialiased;
    font: var(--fa-font-solid);
    font-size: 0.75em;
    content: "\f08e";
    margin: 0 0.25em 0 0.5em;
    vertical-align: 0.125em;
  }
}

@layer utilities {
  .my-text-secondary {
    @apply text-slate-500 dark:text-slate-400;
  }

  .markdown {
    & .hljs {
      @apply !p-0 !text-current;
    }

    & > h1,
    & > h2,
    & > h3,
    & > h4,
    & > h5,
    & > h6 {
      @apply font-sans font-semibold;
    }

    & > h1 {
      @apply mt-4 mb-12 text-5xl;
    }

    & > h2 {
      @apply mt-16 mb-4 border-b border-gray-300 pb-2 text-3xl;
    }

    & > h3 {
      @apply mt-12 mb-4 text-2xl;
    }

    & > h4 {
      @apply mt-8 mb-4 text-xl;
    }

    & > h5 {
      @apply mt-8 mb-4 text-lg;
    }

    & > h6 {
      @apply mt-8 mb-4 text-base;
    }

    & hr {
      @apply my-4;
    }

    & p,
    & blockquote {
      @apply my-6 leading-loose;
    }

    & > pre,
    & > ul,
    & > ol {
      @apply my-8;
    }

    & ul,
    & ol {
      @apply pl-6 leading-loose;
    }

    & ul {
      @apply list-disc;
    }

    & ol {
      @apply list-decimal;
    }

    & > blockquote {
      @apply border-l-4 border-gray-400 px-4 text-gray-500 dark:text-gray-400;

      & > p {
        @apply mt-4;
      }
    }

    & code {
      @apply rounded bg-gray-100 px-1 py-0.5 text-sm dark:bg-gray-800;
    }

    & pre {
      @apply overflow-auto rounded bg-gray-100 p-4 dark:bg-gray-800;
    }

    & :any-link {
      @apply break-all;
    }

    & details {
      @apply my-4;
    }

    /* https://github.com/rehypejs/rehype-autolink-headings */
    .icon-link {
      @apply ml-4 text-gray-300 before:content-["#"] hover:text-blue-700 dark:text-gray-600 hover:dark:text-blue-400;
    }

    & > h1 a[aria-hidden] {
      display: none;
    }

    /* https://github.com/remarkjs/remark-gfm */
    & > .footnotes {
      @apply border-t pt-4;
    }

    /* https://github.com/JS-DevTools/rehype-toc */
    & > .toc-wrapper {
      @apply my-8 rounded bg-neutral-100 p-4 text-sm text-neutral-600 dark:bg-neutral-800 dark:text-neutral-100;

      .toc-summary {
        @apply italic;
      }

      .toc-level {
        @apply list-none pl-2 pt-2;
      }

      .toc-link {
        @apply inline-block w-full truncate text-current font-sans hover:underline;
      }
    }
  }
}

:root {
  --ybiq-bg-opacity: 0.5;
}

.dark {
  --ybiq-bg-opacity: 0.1;
}

body {
  background: no-repeat
    linear-gradient(
      to bottom,
      hsl(211deg 100% 37% / var(--ybiq-bg-opacity)) 50%,
      hsl(50deg 100% 50% / var(--ybiq-bg-opacity)) 50%
    );
  background-size: auto 100vh;
  background-attachment: fixed;
}
